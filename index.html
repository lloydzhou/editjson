<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Editjson : editjson" />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">
	<link rel="stylesheet" type="text/css" href="stylesheets/jquery.editjson.css">
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
	<script src="javascripts/jquery.editjson.js"></script>
    <title>Editjson</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/lloydzhou/editjson">View on GitHub</a>

          <h1 id="project_title">Editjson</h1>
          <h2 id="project_tagline">editjson</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/lloydzhou/editjson/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/lloydzhou/editjson/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">

	    <h2>Edit JSON DATA</h2>
		<pre>
1. 以“data”作为根节点
2. 双击“span”标签可以编辑对应的“key”和“value”
   双击之后变成input输入框，自动获得焦点，失去焦点时替换新的值
   验证输入是否包含json的特殊字符，若验证不通过，则恢复为原来取值
3. li标签的hover事件（鼠标进入）
   3.1 会自动在后面添加按钮“Add after this node”
	   点击之后在当前节点后面添加新的键值
   3.2 添加“DELETE”按钮，点击可以删除当前节点，若包含子节点，会一并删除
   3.3 若当前节点不包含子节点，还会增加按钮“insert to this node”
	   点击之后将当前节点“value”插入到当前节点的子节点
4. li标签的hover事件（鼠标移出）会删除按钮
5. “GET JSON DATA”按钮可以将编辑之后的数据转换为JSON格式。
		</pre>

		<style>
		.json-tree a {cursor: pointer; padding-left: 10px;}
		.json-tree span, .json-tree b{width: 150px;display:inline-block;font-weight: bold;font-style: italic;}
		.json-tree li > ul {padding-left: 20px;}
		</style>
		<textarea id="json-data" rows="10" cols="90"></textarea>
		<ul id="json-tree" class="json-tree"></ul>
		<button id="get-result">GET JSON DATA</button>
		<div id="result"></div>
<script>
$('#json-data').val('{"name":"value","sublevel":{"key":"<h1>value</h1><span>helloword.</span>"},"subarray":["1","2","3","helloworld"]}').change(function(){
	var data = eval('(' + $(this).val() + ')');
	$('#json-tree').jsonEditor({
		tag: 'b', 
		keyClass: '', 
		addButton: '<i class="icon-download"></i>Add After', 
		deleteButton: '<i class="icon-remove-circle"></i>Delete', 
		insertButton: '<i class="icon-play-circle"></i>Insert',
		separator: ' : ', 
		data: eval('(' + $(this).val() + ')'),
		change: function(obj){$('#json-data').val(JSON.stringify($(obj).toJson()))}
	})
}).change();
JSON.stringify = JSON.stringify || function (obj) {
    var t = typeof (obj);
    if (t != "object" || obj === null) {
        if (t == "string") obj = '"'+obj+'"';
        return String(obj);
    }
    else {
        var n, v, json = [], arr = (obj && obj.constructor == Array);
        for (n in obj) {
            v = obj[n]; t = typeof(v);
            if (t == "string") v = '"'+v+'"';
            else if (t == "object" && v !== null) v = JSON.stringify(v);
            json.push((arr ? "" : '"' + n + '":') + String(v));
        }
        var rawString = (arr ? "[" : "{") + String(json) + (arr ? "]" : "}");
       return rawString;
    }
};
$('#get-result').click(function (){
	$('#result').text(JSON.stringify($('#json-tree').toJson()))
})
</script>

      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Editjson maintained by <a href="https://github.com/lloydzhou">lloydzhou</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
